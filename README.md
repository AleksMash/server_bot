# Описание

Это простой Telegram бот, который монторит [API Devman](https://dvmn.org/api/docs/)  и позволяет получать уведомление о факте окончания проверки  работы, которую вы сдали на ревью.

# Установка

Python3 должен быть уже установлен.
Затем используйте `pip` для установки зависимостей:

```
pip install -r requirements.txt
```

## Переменные окружения

Скрипт использует чувствительные данные - токен вашего Telegram бота и ваш токен для доступа к [API DevMan](https://dvmn.org/api/docs/), а также ID вашего чата с ботом,  которые необходимо сохранить в файле `.env` каталоге проекта. Как узнать chat_id читайте здесь: [Как узнать свой ID в Telegram Bot и получить адрес канала: get chat user и где посмотреть группу](https://stelegram.ru/ispolzovanie/kak-uznat-id-chata-polzovatelya-i-kanala)


```
DVMN_TOKEN=<токен API Devman>  
TG_CLIENTS_TOKEN=<токен бота>
CHAT_ID=<ID вашего чата с ботом>
```

# Использование

- задайте переменные окружения (см. выше)
- запустите скрпит `python bot_auto.py`

Если запуск прошел успешно бот перейдет в режим "прослушивания" [API DevMan](https://dvmn.org/api/docs) в режиме long-polling. В случае, если работа будет проверена в ваш чат c ботом придет соответствующее сообщение. В случае возникновения ошибок в коде бота в чат будет отправлен traceback этих ошибок.

# Запуск через Docker

- установите [Docker](https://docs.docker.com/get-docker/
- загрузите образ из репозитария командой `docker pull avmseven/devman_bot`
- создайте контейнер командой `docker run -d --env-file <your_config_file> avmseven/devman_bot`
    - `your_config_file` - путь к файлу с переменными окружения (описан выше)

## Отсановка контейнера

- скопируйте ID контейнера получив его через команду `docker ps` либо в Docker Desktop
- остановите процесс в контейнере командой `docker stop <ID контейнера>`